---
layout: post
title: "Cookie"
date: 2024-07-23
description: "Cookie"
tag: 风控
katex: true
---

# 咩是Cookie？

Cookie 是访问者访问网站后留下的一个信息片段。它存储在客户端（通常来说是浏览器）。可以把Cookie当做一个map，里面是键值对，每个键值对有过期时间（Expires）、域（Domain）、路径（Path）等信息；客户端请求时，默认会带上Cookie 的名称和值，通过`http`请求报文`header`中的`cookie`项进行传输；服务器响应时，可以设置`cookie`信息，就在`http`响应报文的`header`中`Set-Cookie`项。

# Cookie 有咩用啊？

告诉服务器，我是YYP，我上一秒来过的哦 :-)

港笑噶啦~

Cookie存在的意义要从HTTP协议说起，HTTP协议是一个**无状态协议**。无状态的含义就是客户端的每个请求对服务器来说都是全新的，即使客户端在前一秒发送请求告诉服务器我是user YYP，下一秒再发送请求时，服务器会响应，但是它不知道当前请求还是来自user YYP的。每个请求都是独立的，上一个请求和下一个请求之间是没有任何联系的。

HTTP协议设计为无状态的，主要是因为服务器需要用户多，而每个客户端(即浏览器)与服务器之间交换数据的间歇性较大(即传输具有突发性、瞬时性)，并且网页浏览的联想性、发散性导致两次传送的数据关联性很低，大部分连接实际上会很空闲、无端占用资源。因此 HTTP 的设计者针对用户访问服务器的这些特点将协议设计为发起请求时建立连接、请求结束时释放连接，以尽快将资源释放出来服务其他客户端。

HTTP协议的无状态就带来了一些问题，比如我们通过用户名密码登录了网站，后续再次发请求给服务器时，服务器并没有办法识别到我们在上一个请求中提供的用户信息，除非我们在请求中再次携带用户信息。如果服务器想要识别客户端的身份，那就需要通过一些方法将客户端的身份信息记录下来。

 Cookie是通过客户端保存状态信息的解决方案。Cookie的工作步骤：

1.Cookie就是由服务器发给客户端的特殊信息，这些信息中会包含客户端的身份信息，客户端在收到这些信息后会以文本文件的方式保存在客户端；

2.之后客户端每次向服务器发送请求的时候都会在Cookie Header中带上这些信息；

3.服务器在接收到来自客户端浏览器的请求之后，就能够通过分析Cookie Header中的信息得到客户端的身份信息；

举个栗子，你打开淘宝的网页，点击登录，输入用户名和密码，客户端将信息串`/login？username=yyp password=xxx `传给了服务器；服务器验证用户信息 响应后，会设置 cookie信息，在`http`的响应报文的`head`中的`Set-Cookie`中 将信息`set-Cookie: username=yyp password=xxx`返回给客户端；后续在请求服务器，服务器会先看Cookie Header的信息来获取客户端的身份信息。


# Cookie 的应用

- 会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）；
- 个性化设置（如用户自定义设置、主题等）；
- 浏览器行为跟踪（如跟踪分析用户行为等）；









